doctype html
html(lang="en")
  head
    meta(charset="utf-8")
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous")
    title The Great Carbon Arbitrage
  body
    div.container
      header(class="d-flex flex-wrap justify-content-center py-3 mb-4").navbar.navbar-light.bg-light
        a(href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-decoration-none").ms-3
          span.fs-4.navbar-brand The Great Carbon Arbitrage

        ul(class="nav nav-text")
          li.nav-item
            a(href="#").nav-link.active Carbon Arbitrage
          li.nav-item
            a(href="#").nav-link.active Climate Financing
          li.nav-item
            a(href="#").nav-link.active Paper
          li.nav-item
            a(href="#").nav-link.active Code
          li.nav-item
            a(href="#").nav-link.active Blog

    script(src="js/sensitivity_analysis_result.js")
    script(src="js/carbon_arbitrage.js")

    mixin slider(id, label, min, max, step, value)
      div.flex-row
        label(for=id).form-label= label
        // https://stackoverflow.com/questions/10004723/html5-input-type-range-show-range-value
        input(id=id type="range" min=min max=max step=step value=value oninput="this.nextElementSibling.value = this.value; calculate()").form-range.w-80
        |&nbsp;
        output= value

    mixin inputSelect(id, label, selected, vals)
      label(for=id).form-label= label
      select(id=id, onchange="calculate()").form-select.w-80
        each val in vals
          - var isSelected = selected == val
          option(selected= isSelected)= val

    div.d-flex.flex-row.justify-content-center
      // Output
      div(style="width:700px; margin:0 auto;").ms-auto
        table.table.table-hover
          tr
            td Present value of benefits of phasing out coal (in trillion dollars)
            td
              output#pv-benefits 87.05
          tr
            td Present value of costs of phasing out coal (in trillion dollars)
            td
              output#pv-costs 29.03
          tr
            td
              |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              |Opportunity costs (in trillion dollars)
            td
              output#opportunity-costs 0.05
          tr
            td
              |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              |Investment costs (in trillion dollars)
            td
              output#investment-costs 28.98
          tr.table-success
            td Carbon arbitrage (in trillion dollars)
            td
              output#carbon-arbitrage 77.89
          tr.table-success
            td Carbon arbitrage relative to world GDP
            td
              output#carbon-arbitrage-relative-gdp 1.2 %
          tr.table-success
            td Carbon arbitrage (in dollars) per tonne of coal production
            td
              output#carbon-arbitrage-per-tcoal 154
          tr.table-success
            td
              |Carbon arbitrage (in dollars) per tCO
              sub 2
            td
              output#carbon-arbitrage-per-tco2 67
          tr
            td Total coal production prevented (Giga Tonnes)
            td
              output#coal-production-prevented 506.79
          tr
            td
              |Total emissions prevented (GtCO
              sub 2
              |)
            td
              output#emissions-prevented 1160.61
          tr
            td
              |Further temperature increase &#8212; on top of 1.1 &#8451;
              br
              |already observed &#8212; prevented
            td
              output#temperature-increase 1.74
          //tr
          //  td Debug
          //  td
          //    output#debug

      // Input
      div(class="d-flex flex-wrap justify-content-center py-3 mb-4", style="margin:0 auto")
        .flex-column
          +slider("social-cost-of-carbon", "Social cost of carbon", 25, 400, 25, 75)

          +inputSelect(
            "time-horizon",
            "Time horizon of carbon arbitrage",
            "2100",
            ["2050", "2070", "2100"]
          )

          +inputSelect(
            "phaseout-scenario",
            "Coal phase out scenario",
            "Net Zero 2050 (NGFS global scenario)",
            ["Net Zero 2050 (NGFS global scenario)", "Halt to coal production"]
          )

          +inputSelect(
            "coal-replacement",
            "Coal replacement",
            "50% solar, 50% wind",
            ["100% solar, 0% wind", "56% solar, 44% wind", "50% solar, 50% wind", "0% solar, 100% wind"]
          )

          +inputSelect(
            "lifetime-renewable-plants",
            "Investment costs - lifetime renewable plants",
            "30 years",
            ["30 years", "50 years"]
          )

          +inputSelect(
            "learning-curve",
            "Investment costs fall - learning curve",
            "Learning (investment cost drop because of learning)",
            ["Learning (investment cost drop because of learning)", "No learning (no investment cost drop)"]
          )

          +inputSelect(
            "discount-rate",
            "Discount rate œÅ",
            "2.8% (WACC)",
            ["2.8% (WACC)", "3.6% (WACC, average risk-premium 100 years)", "5%", "8%"]
          )

    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous")
  </body>
